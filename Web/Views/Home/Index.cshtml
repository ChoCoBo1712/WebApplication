@using Domain.Models
@using Web.ViewModels.Home
@model Web.ViewModels.Home.SearchViewModel

<head>
    <meta name="viewport" content="width=device-width"/>
    <title>Index</title>
    <div>
        @if (User.Identity.IsAuthenticated)
        {
            <div>@User.Identity.Name</div>
            <div>
                <form method="post" asp-controller="Account" asp-action="Logout">
                    <input type="submit" value="Logout" style="margin-top: 10px"/>
                </form>
            </div>
        }
        else
        {
            <a class="cross-fade" asp-controller="Account" asp-action="Login">Login</a>
            <a class="cross-fade" asp-controller="Account" asp-action="Register">Register</a>
        }
    </div>
    <hr/>
</head>
<body>
<div align="center">
   <h2>Audios</h2>
   <hr/>
   <form action="/home/index" enctype="multipart/form-data" method="post">
       <div asp-validation-summary="All" class="text-danger"></div>
       <div class="form-group">
           <label asp-for="Search" class="control-label">Search</label>
           <input type="text" asp-for="Search" class="form-control"/>
       </div>
       <div class="form-group">
           <label asp-for="Category" class="control-label">In</label>
           <select asp-for="Category" asp-items="Html.GetEnumSelectList<Categories>()" class="form-control"></select>
       </div>
       <div class="form-group">
           <input type="submit" value="Submit" style="margin-top: 10px"/>
       </div>
   </form>
   <table class="admin_table" cellpadding="0" cellspacing="0">
       <tr>
           <th>Player</th>
           <th>Name</th>
           <th>Image</th>
           <th>Artist</th>
           <th>Album</th>
           <th>Tags</th>
       </tr>
       @foreach (Song song in Model.Songs)
       {
           <tr>
               <td>
                   <audio controls style="width: 245px">
                       <source src="~/audio/@song.FilePath" type="audio/@song.FilePath.Split('.')[1]">
                       Your browser does not support the audio element.
                   </audio>
               </td>
               <td>@song.Name
               <td><img src="~/img/albums/@song.Album.ImagePath" width="60" height="60"></td>
               <td><a class="draw-outline draw-outline--tandem" href="/home/artist?id=@song.Album.Artist.Id">@song.Album.Artist.Name</a></td>
               <td><a class="draw-outline draw-outline--tandem" href="/home/album?id=@song.Album.Id">@song.Album.Name</a></td>
               <td>
                   <div style="height: 20px; width: 100px; overflow-y: auto; overflow-x: hidden">
                       <table>
                           @foreach (var tag in song.Tags)
                           {
                               @if (tag.Verified)
                               {
                                   @tag.Name
                                   <break/>;
                               }
                           }
                       </table>
                   </div>
                   <div>
                       @if (User.Identity.IsAuthenticated)
                      {
                         <a class="draw-outline draw-outline--tandem" href="/home/addTag?id=@song.Id">Add</a>
                      }
                   </div>
               </td>
           </tr>
       }
   </table> 
</div>
</body>
